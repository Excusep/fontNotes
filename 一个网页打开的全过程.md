#### 一个网页打开的全过程

![1553741759796](C:\Users\ADMINI~1\AppData\Local\Temp\1553741759796.png)

* DNS解析
  + 域名转换成对应的IP地址，这个过程称作DNS解析。 
* 浏览器自身缓存记录
  * Chrome浏览器通过输入：chrome://net-internals/#dns 打开DNS缓存页面 
  * 1000条左右
  * 时间1分钟
* 缓存中没有找到缓存记录或者记录已经过期
  +  ipconfig /displaydns 命令查看本机当前的缓存 
  + 通过hosts文件 ，\system32\drivers\etc\hosts 
* 发起http请求
  * 其本质是在建立起的TCP连接中，按照HTTP协议标准发送一个索要网页的请求。 
* 负载均衡
  * 当一台服务器无法支持大量的用户访问时，将用户分摊到两个或多个服务器上。 
* Nginx（负载均衡）
  * 一款面向性能设计的HTTP服务器，相较于Apache、lighttpd具有占有内存少，稳定性高等优势。 
* 浏览器渲染
  * 浏览器根据页面内容，生成DOM Tree，根据CSS内容，生成CSS Rule Tree。调用js执行引擎执行js代码
  * 根据DOM Tree和CSS Rule Tree生成Render Tree(呈现树)
  * 根据Render Tree渲染网页
* CDN
  * 内容分发网络，是依靠部署在各地的边缘服务器，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度。
* 网页静态资源加载
  * 浏览器根据url加载该url下的图片内容。本质上是浏览器重新开始第一部分的流程，区别只是负责均衡服务器后端的服务器不再是应用服务器，而是提供静态资源的服务器。





#### 如何提高页面加载速度

* 减少HTTP请求

  * CSS Sprites（图片精灵）
  * 使用字体图标
  * 合并脚本和样式表（打包的时候生成一个目标文件）

* 使用CDN

  * 内容分发网络（选择最短相应时间的 服务器）
  * 数据备份、扩展存储能力，进行缓存，同时有助于缓和Web流量峰值压力

* 添加Expires头

  * 控制缓存失效日期
  * 缓存之后下次访问就会减少不必要的请求

* 压缩组件

  * Content-Encoding: gzip      （压缩头）

* 将样式表放在头部

  * 减少页面首屏出现的时间，使页面内容逐步呈现，改善用户体验，防止“白屏” 

* 将脚本放在底部

  * 减少页面首屏出现的时间，使页面内容逐步呈现，改善用户体验，防止“白屏” 
  * 防止阻断DOM树

* 避免CSS表达式

  * 用js事件处理机制来动态改变元素的样式，使函数运行次数在可控范围之内 

* 使用外部的JavaScript和CSS

* 减少DNS查找

* 精简JavaScript

* 避免重定向

* 删除重复脚本

* 配置ETag

  * 实体标签

* 使Ajax可缓存

  * POST的请求，是不可以在客户端缓存的，每次请求都需要发送给服务器进行处理，每次都会返回状态码200。（可以在服务器端对数据进行缓存，以便提高处理速度）

    GET的请求，是可以（而且默认）在客户端进行缓存的，除非指定了不同的地址，否则同一个地址的AJAX请求，不会重复在服务器执行，而是返回304。

  * 在进行Ajax请求的时候，可以选择尽量使用get方法，这样可以使用客户端的缓存，提高请求速度。 